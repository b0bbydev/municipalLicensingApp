<h2 class="text-center">Admin Panel</h2>
<!-- check for error messages in the session -->
{{#if message}}
  <div class="alert alert-danger">
    {{message}}
  </div>
{{/if}}
<h4>Filtering</h4>
<form class="mb-0" method="GET">
  <select
    class="form-select-sm"
    id="filterCategory"
    title="filterSelect"
    name="filterCategory"
    required
  >
    <option value="" disabled selected>Filter By...</option>
    {{#each dropdownValues}}
      {{#if this.isDisabled}}
        <option
          value="{{this.dropdownValue}}"
          disabled
        >{{this.dropdownValue}}</option>
      {{else}}
        <option value="{{this.dropdownValue}}">{{this.dropdownValue}}</option>
      {{/if}}
    {{/each}}
  </select>
  <!-- filterValue input -->
  <input
    name="filterValue"
    id="filterValue"
    class="form-control-sm"
    pattern="^[^\x27\x22;=_()*&%$#!<>\/\^\\]*$"
    title="No special characters!"
    placeholder="Search..."
    value="{{filterValue}}"
  />
  <button
    id="filterButton"
    class="btn btn-sm btn-primary"
    type="submit"
  >Search</button>
  <a
    id="filterButton"
    href="/admin"
    class="btn btn-sm btn-secondary"
    type="submit"
  >Reset</a>
</form>
<div class="row mt-1">
  <div class="col">
    <h4 class="float-start">User List</h4>
    <a class="btn btn-sm btn-primary mb-1 float-end" href="/admin/addUser">Add
      User</a>
    <!-- Table -->
    <table
      class="table table-sm table-bordered table-striped table-hover sortable"
    >
      <thead>
        <tr>
          <th>Employee Name</th>
          <th>Email</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {{#each data}}
          <tr>
            <td><a id="ownerLink" href="/admin/editUser/{{this.id}}">
                {{this.firstName}}
                {{this.lastName}}</a></td>
            <td>{{this.email}}</td>
            <td>
              <a
                class="btn btn-sm btn-secondary"
                href="/admin/manageAccess/{{this.id}}"
              >Manage Access</a></td>
          </tr>
        {{/each}}
      </tbody>
    </table>
    <nav id="pagination">
      <ul class="pagination pagination-sm">
        {{#if paginate.hasPreviousPages}}
          <li class="page-item"><a
              class="page-link"
              href="{{prev}}"
            >Prev</a></li>
        {{/if}}
        {{#each pages}}
          <li class="page-item">
            <a class="page-link" href="{{this.url}}">{{this.number}}</a></li>
        {{/each}}
        {{#if hasMorePages}}
          <li class="page-item"><a
              class="page-link"
              href="{{paginate.href}}"
            >Next</a></li>
        {{/if}}
      </ul>
    </nav>
  </div>
</div>